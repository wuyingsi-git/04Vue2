<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>01</title>
    <script src="vue2.6.10.js"></script>
</head>
<body>
<div id="demo1">
    <my-button></my-button>
</div>
<script>
    Vue.component('my-button',{
        template:`<div>
                    <button @click="addClick" :style="button">+</button>
                    <input v-focus type="text" v-html="msg" v-model="num" :style="text">
                    <button @click="cutClick" :style="button">-</button>
                </div>`,
        data(){
            return{
                num:1,
                button:'background:#33546a;color:white;border:2px solid #33546a; width:30px;height:35px;',
                text:'border:2px solid #33546a; width:70px;height:30px;text-align:center;'
            }
        },
        methods:{
            addClick(){
                this.num++;
            },
            cutClick(){
                if (this.num>1)
                    this.num--;
                else
                    alert('数量为1，不能再减')
            }
        },
        directives:{
            focus(el){
                el.focus();
            }
        },
        computed:{
            msg() {
                var reg = new RegExp(/^[1-9]\d*$/);
                if (!reg.test(this.num)) {
                    alert('输入数据不合法');
                    focus();
                    this.num = 1;
                }
                else if (this.num < 0) {
                    alert('输入数据不合法');
                    focus();
                    this.num = 1;
                }
            }
        }
    })
    new Vue({
        el:'#demo1'
    })
</script>
</body>
</html>